<html>
   <head>
      <meta HTTP-EQUIV='Pragma' CONTENT='no-cache'>
	  <meta http-equiv="refresh" content="<%ejGet(timeout_refresh)%>">
	  
<style>
<!-- 
.top_nav {
	FONT-WEIGHT: bold; FONT-SIZE: 12px; COLOR: #333333; FONT-FAMILY: Arial, Helvetica, sans-serif; TEXT-DECORATION: none
}
.leftLink {
	FONT-WEIGHT: bold; FONT-SIZE: 10px; COLOR: #CCCCCC; LINE-HEIGHT: 15px; FONT-FAMILY: Arial, Helvetica, sans-serif; TEXT-DECORATION: none
}
.section {
	FONT-WEIGHT: bold; FONT-SIZE: 11px; COLOR: #ffffff; LINE-HEIGHT: 15px; FONT-FAMILY: Arial, Helvetica, sans-serif; TEXT-DECORATION: none
}
.head_bold {
	FONT-WEIGHT: bold; FONT-SIZE: 17px; COLOR: #0066FF; LINE-HEIGHT: 15px; FONT-FAMILY: Arial, Helvetica, sans-serif; TEXT-DECORATION: none
}
A {
	COLOR: #003366; TEXT-DECORATION: none
}
A:hover {
	COLOR: #0000FF; TEXT-DECORATION: underline
}
.copy_1 {
	FONT-SIZE: 11px; COLOR: #333333; LINE-HEIGHT: 14px; FONT-FAMILY: Verdana, Arial, Helvetica, sans-serif
}
.submitBtn {
	FONT-SIZE: 11px; BORDER-LEFT-COLOR: #CCCCCC; BORDER-BOTTOM-COLOR: #CCCCCC; COLOR: #333333; BORDER-TOP-COLOR: #CCCCCC; FONT-FAMILY: Verdana, Arial, Helvetica, sans-serif; BACKGROUND-COLOR: #CCCCCC; BORDER-RIGHT-COLOR: #CCCCCC
}

 -->
</style> 
	  
		<%ejGet("curLanguage")%>
		<SCRIPT>assign_var();</SCRIPT>
<SCRIPT language=JavaScript src="showMenu.js"></SCRIPT>
	  
<script language="javascript">
<!-- hide

strHtml='<title>'+utm_1+' &gt; '+utfu_1+'</title>';
dw(strHtml);


var upload_status = '<%ejGet(glbUpgrade)%>';
var autoUP = '<%ejGet(autoUpgrade)%>';



var progress = 0;
var loadedcolor='blue' ;
var unloadedcolor='white';
var bordercolor='black';
var barheight=50;
var barwidth=400;
var waitTime=90;
var blocksize=(barwidth-2)/waitTime/10;
var loaded=0;
var PBouter;
var PBdone;
var Pid=0;

var progress_tr_node;
var progress_tr_tr_node;


function frmLoad()
{	

	var str="";
	
	if(autoUP == '0')
	{
		str += "<table width='780' border='0' cellpadding='0' cellspacing='0'>"
		str += "<tr><td height='10' colspan='2' ></td></tr>\n";
		str += "<tr>\n";
		str += "<td class='copy_1'><b>"+utfu_2+" &gt;</b>&nbsp;&nbsp;</td>";
		str += "<td width='630'><input type='button' class='submitBtn' style='height:22px; width:160px;' value='"+utfu_3+"' onClick='checkFirmware();'></td>\n";
		str += "</tr>\n";		  
		str += "</table>\n"
	}			  
	
	document.getElementById('check_new').innerHTML = str;	    
					
			  




	if(upload_status == '1')
	{
		modify(2);
		progressBarInit();
	
	}	
}


function isInProgress() {
   if ( progress == 0 )  {
      progress = 1;
      return true;
   }
   alert(utfu_4);
   return false;
}

function checkFirmware() 
{
	newwin=window.open("checkfw.html","Firmware","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,width=395,height=200,resizable=0");
	newwin.focus();
}

function modify(level)
{
var progress_elm=document.getElementById("progress_tr");
var progress_tr_elm=document.getElementById("progress_tr_tr");
var insert_tr_elm=document.getElementById("PBouter");
	if(level==1)
	{
		progress_tr_node=progress_elm.parentNode.removeChild(progress_elm);
		progress_tr_tr_node=progress_tr_elm.parentNode.removeChild(progress_tr_elm);
	}
	if(level==2)
	{
		insert_tr_elm.parentNode.insertBefore(progress_tr_node,insert_tr_elm);
		insert_tr_elm.parentNode.insertBefore(progress_tr_tr_node,insert_tr_elm);
	}
}

function incrCount()
{
	window.status="Loading...";
	loaded++;
	if(loaded>=waitTime*10)
	{
		clearInterval(Pid);
		window.status=' ';
		loaded--;
		window.location.replace("home.html");
	}
	resizeEl(PBdone, blocksize*loaded);
}

function hidebar()
{
	clearInterval(Pid);
	window.status='';
}

function resizeEl(id,r)
{
id.style.width=r+'px';
}



function progressBarInit()
{
	PBouter=document.getElementById('PBouter');
	PBdone=document.getElementById('PBdone');
	resizeEl(PBdone,0);
	PBouter.style.visibility="visible";
	Pid=setInterval('incrCount()',125);
}

function messageCheck() 
{
	if(document.webForm.filename.value.length == 0) 
		alert(utfu_5);
	else
	{
 		if (confirm(utfu_6))
 		{
			alert(utfu_7);
			//modify(2);
			//progressBarInit();
			document.webForm.submit();
			return true;
 		}
	}
	return false;
}






// done hiding -->
</script>
   </head>
   <body  bgColor="#ffffff" leftMargin="0" topMargin="0" marginheight="0" marginwidth="0" onLoad="modify(1);frmLoad()">
        <form name="webForm" method='post' ENCTYPE='multipart/form-data' action='util_firmware.cgi'>
       <SCRIPT language=JavaScript>
	var helpItem 	='Firmware Update';
	var menuSection	='Util';
	var menuItem	='Firmware Update';
	var isAPmode = '<%ejGet(enblNat)%>';
		
	var wanStatus = '<%ejGetOther(isUp)%>';
	showHead(wanStatus,helpItem);
	showMenu(menuSection,menuItem,isAPmode)
	</SCRIPT>  
<TD class=head_bold width="90%" valign="top"><Br>
<font class="head_bold"><b>&nbsp;&nbsp;&nbsp;<script>dw(utm_1);</script> &gt; <script>dw(utfu_1);</script></b></font><Br><br>

               <table width="656" height="24" border="0" cellpadding="0" cellspacing="0">
                  <tr>
				  	 <Td width="20"></Td>
                     <td width="622" class="copy_1">
						<script>dw(utfu_8);</script><BR><br>
						<script>dw(utfu_9);</script> 					
						 					
					</td>
				 </tr>	 
	</table>
         
               <Br><Br>

		 <table border="0" cellpadding="0" cellspacing="0">
		 <Tr><td width="17"></td>
		 <Td width="790">
			         
            <table width="780" border="0" cellpadding="0" cellspacing="0">
               <tr>
			    <td width="142"  class="copy_1"><b><script>dw(utfu_10);</script> &gt;</b>&nbsp;&nbsp; </td>
			    <td width="638" class="copy_1"><font color="#0000FF"> <%ejGet(simpleFirmwareVersion)%> </font></td>
			  
			  </tr>
			</table>  
			  
			  <div id='check_new'></div>
			  
			<table width="780" border="0" cellpadding="0" cellspacing="0">  
			  <tr><td height="20"></td></tr>
              <tr>
                  <td  class="copy_1">
                  <b><script>dw(utfu_11);</script> &gt;</b>&nbsp;&nbsp;
                  </td>  
                  <td width="630"><font face="Verdana"><input type='file' style="border-color:#3399cc; border-style:solid; border-width: 1px;"	name='filename' size='35'></font></td>
              </tr>
			  
              <tr>
                  <td><Br></td>
                  <td><br><br><script>
				  	var info = "<input type='button' style='height:22px;width:120px;' value='"+utfu_12+"' class='submitBtn' onClick='messageCheck()'>";
					dw(info);				  
				  </script></td>
              </tr>
           </table>
   	</Td>
	</Tr>
	</table>
   <Br><Br>
   
   <table border="0" cellpadding="0" cellspacing="0">
   <Tr><td width="15"></td>
   <Td>
   
    <SCRIPT>
var txt='<div id="progress_tr"><font face="verdana,arial" size="1">'+utfu_13+'</font></div>';
txt+='<div id="progress_tr_tr"><font face="verdana,arial" size="1">'+utfu_14+'</font></div>';
txt+='<div>&nbsp;</div>';
txt+='<div id="PBouter" onmouseup="hidebar()" style="position:relative; visibility:hidden; background-color:'+bordercolor+'; width:'+barwidth+'px; height:'+barheight+'px;">';
txt+='<div style="position:absolute; top:1px; left:1px; width:'+(barwidth-2)+'px; height:'+(barheight-2)+'px; background-color:'+unloadedcolor+'; font-size:1px;"></div>';
txt+='<div id="PBdone" style="position:absolute; top:1px; left:1px; width:0px; height:'+(barheight-2)+'px; background-color:'+loadedcolor+'; font-size:1px;"></div>';
txt+='</div>';
document.write(txt);
</SCRIPT>
   
   </Td>
   
   </Tr>
   </table>
   
   </TD></TR></TBODY></TABLE></TD>          			
         </form>
   </body>
</html>
